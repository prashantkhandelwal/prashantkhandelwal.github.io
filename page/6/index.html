<!DOCTYPE html>
<html lang="en-us">
    
<head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="public" />
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.49" />

    

<title>Midnight Programmer</title>


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Midnight Programmer"/>
<meta name="twitter:description" content="Programming For Fun"/>

<meta property="og:title" content="Midnight Programmer" />
<meta property="og:description" content="Programming For Fun" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://prashantkhandelwal.github.io/" />
<meta property="og:updated_time" content="2014-05-17T23:25:00&#43;00:00"/><meta property="og:site_name" content="Midnight Programmer" />


    


<link rel="stylesheet" href="/css/hyde-hyde.css">
<link rel="stylesheet" href="/css/print.css" media="print">


    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/favicon.png">
    

<link href="https://prashantkhandelwal.github.io/index.xml" rel="alternate" type="application/rss+xml" title="Midnight Programmer" />
<link href="https://prashantkhandelwal.github.io/index.xml" rel="feed" type="application/rss+xml" title="Midnight Programmer" />


</head>


    <body class=" ">
    
<div class="sidebar">
  <div class="container ">
    <div class="sidebar-about">
      <span class="site__title">
        <a href="https://prashantkhandelwal.github.io/">Midnight Programmer</a>
      </span>
      
      
      
      <div class="author-image">
        <img src="https://prashantkhandelwal.github.io//img/prashantk.jpg" alt="Author Image" class="img--circle img--headshot element--center"> 
      </div>
      
      <p class="site__description">
         Programming For Fun 
      </p>
    </div>
    <div class="collapsible-menu">
      <input type="checkbox" id="menuToggle">
      <label for="menuToggle">Midnight Programmer</label>
      <div class="menu-content">
        <div>
	<ul class="sidebar-nav">
		 
		 
			 
				<li>
					<a href="/archive/"><i class='fa fa-road'></i>
						<span>Archive</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/top-posts/"><i class='fa fa-star fa-fw'></i>
						<span>Top Posts</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/contact/"><i class='fa fa-envelope fa-fw'></i>
						<span>Contact</span>
					</a>
				</li>
			 
		
		</li>
	</ul>
</div>

        <section class="social">
	
	
	<a href="https://facebook.com/khandelwal.p" rel="me"><i class="fab fa-facebook-f"></i></a>
	
	
	<a href="https://github.com/prashantkhandelwal" rel="me"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	<a href="http://feeds.feedburner.com/MidnightProgrammer" rel="me"><i class="fa fa-rss fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	<a href="https://instagram.com/prashantkhandelwal" rel="me"><i class="fab fa-instagram fa-lg" aria-hidden="true"></i></a>
	
	
	<a href="https://linkedin.com/in/khandelwalprashant" rel="me"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
</section>

      </div>
    </div>
    <p class="copyright">
      &copy; 2023 Pashant Khandelwal
      <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/2.5/in/"><img style="border-width: 0;" src="https://i.creativecommons.org/l/by-nc-sa/2.5/in/88x31.png" alt="Creative Commons License" class="thinglinkFiltered"></a>
      
    </p>
  </div>
  <div>
  </div>
</div>

        <div class="content container">
            
<div class="post-list">
  
  
  <div class="post-list__item">
    <span class="item__title--big">
      <a href="/post/building-real-time-applications-with-firebase-and-angularjs/">Building Real Time Applications With Firebase And AngularJS</a>
      
    </span>
    <span class="item__date">
      <i class="fas fa-calendar-alt"></i> May 17, 2014
    </span>
    
    <span>
      
      
      
      
      
      
      <a class="badge badge-category" href="/category/api">API</a>
      &nbsp;
      
      <a class="badge badge-category" href="/category/cloud">CLOUD</a>
      &nbsp;
      
      <a class="badge badge-category" href="/category/web">WEB</a>
      
      
      
      
    </span>
    

<p>Building real-time applications with SignalR is easy. But building real-time applications with JavaScript will be a problem if you are not aware of <a href="https://www.firebase.com/">Firebase</a>. I first heard of it when I was learning <a href="http://angularjs.org/">AngularJS</a>. The official AngularJS site has the example where you can add, edit and delete the detials in real-time. This example uses Firebase as the storage and updates the UI in real time.</p>

<p>The data is stored in JSON format and accessing it using jQuery makes it very easy. Firebase API is pretty powerful and lets you get started in minutes. To get started with Firebase, you have to first <a href="https://www.firebase.com/signup/">create a new account with Firebase</a>. It&rsquo;s a paid service but for now you can opt for a developer account. As soon as your account is created you will be redirected to your dashboard where you can create a new application or use the one which is there by default from Firebase. Take the note of the URL ending with <code>firebaseIO.com</code>, we will be needing it later on at the time of implementing.</p>

<p><img src="/images/firebase-create-new-app.png" alt="Firebase New App" /></p>

<p>Clicking on Manage App button will take you to the details page of the application. Where you can view/edit/import/export the data in the JSON format, authentication from Facebook, Twitter, Google etc, simulate read/write operation and more. You can see the sample data in JSON format I have been testing in the below screenshot. If you already have a JSON file, you can directly import it from the dashboard using the <code>Import JSON</code> feature.</p>

<p><img src="/images/firebase-dashboard.png" alt="Firebase Dashboard" /></p>

<p>For this example I am using jQuery and AngularJS. If you wish you can just stick to jQuery. Create a new HTML page and add Firebase JS references in the head section. I am using AngularJS so I am going to add AngularJS reference as well.</p>

<pre class="brush: js">
&lt;script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.min.js" type="text/javascript"&gt;&lt;/script&gt;
&lt;script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.15/angular.min.js"&gt;&lt;/script&gt;
&lt;script src="https://cdn.firebase.com/js/client/1.0.11/firebase.js"&gt;&lt;/script&gt;
&lt;script src="https://cdn.firebase.com/libs/angularfire/0.7.1/angularfire.min.js"&gt;&lt;/script&gt;
</pre>

<p>You get the first three references but the last reference is the AngularFire which is a quick way to work with Firebase applications with AngularJS. This is AngularJS code with firebase dependency.</p>

<pre class="brush: js">
var feedApp = angular.module('feedDataApp', ['firebase']);
 
feedApp.controller('feedListController', function ($scope, $firebase) {
    var fbURL = new Firebase("https://scorching-fire-0000.firebaseio.com/Feeds/");
    $scope.feedsList = $firebase(fbURL);
 
    $scope.save = function () {
        $scope.feedsList.$add({
            Name: $scope.feedsList.Name,
            Url: $scope.feedsList.Url,
            Description: $scope.feedsList.Description
             
        });
        $(":text").val('');
    }
});
</pre>

<p>I am not getting into the basics of AngularJS, but I will explain few things in the above code. The first line in the above code has the dependency named <code>firebase</code>, in simple AngularJS apps we could have skip the dependecies. Then I have the controller named <code>feeListController</code>, which is accompanied by a very own <code>$scope</code> and new param which is <code>$firebase</code>. Inside the controller I have a variable <code>fbURL</code> which holds my Firebase URL. If you see here, you willl notice that I have appended the URL with <code>Feeds</code>. This is because I want my data to be saved inside the Feeds section in the Firebase storage. The <code>$scope.feedsList</code> will hold the collection of all my entries I have in my storage. I have the save function which will save the details to my storage. Inside the Firebase&rsquo;s <code>$add</code> function, I have passed <code>Name</code>, <code>Url</code> and <code>Description</code>. You can pass as many params as you want. the best thing is that you don&rsquo;t even have to set the storage schema. As soon as you click the save button, a new entry is created in the storage. This is my storage looks like.</p>

<p><img src="/images/firebase-json-tree.png" alt="Firebase JSON Viewer" /></p>

<p>If you don&rsquo;t want to save it under the <code>Feeds</code> section then in the above JS file you just have to remove the <code>Feeds</code> from the above URL. The UI for this demo is simple, just listing down the saved JSON data in a readable form using AngularJS.</p>

<pre class="brush: html">
&lt;div ng-controller="feedListController"&gt;
    &lt;table class="table"&gt;
        &lt;tr&gt;
            &lt;td&gt;
                Name
            &lt;/td&gt;
            &lt;td&gt;
                Url
            &lt;/td&gt;
            &lt;td&gt;
                Description
            &lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr ng-repeat=" feeds in feedsList"&gt;
            &lt;td&gt;{{feeds.Name}}&lt;/td&gt;
            &lt;td&gt;{{feeds.Url}}&lt;/td&gt;
            &lt;td&gt;{{feeds.Description}}&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;
                &lt;input type="text" ng-model="feedsList.Name" /&gt;&lt;br /&gt;
            &lt;/td&gt;
            &lt;td&gt;
                &lt;input type="text" ng-model="feedsList.Url" /&gt;&lt;br /&gt;
            &lt;/td&gt;
            &lt;td&gt;
                &lt;input type="text" ng-model="feedsList.Description" /&gt;&lt;br /&gt;
            &lt;/td&gt;
            &lt;td&gt;
                &lt;button type="submit" ng-click="save()"&gt;Add Feed&lt;/button&gt;
            &lt;/td&gt;
        &lt;/tr&gt;
    &lt;/table&gt;
&lt;/div&gt;
</pre>

<p>Using a simple design I have displayed the details using AngularJS.</p>

<p><img src="/images/firebase-web-app.png" alt="Firebase Angular Web App" /></p>

<p>The best part is the as soon as I add a new feed details, it will get updated in the UI in real-time. Open the same page on a different browser and add a new entry. You will notice that the data is updated in real-time.</p>

<p><img src="/images/firebase-json-db.png" alt="Firebase DB" /></p>

<p><img src="/images/firebase-ng-app-output.png" alt="Firebase Angular Web App" /></p>

<p>Firebase is not limited for web, it is available for iOS/OS x, Java/Android, Node.js, Ember etc. Building mobile applications using Firebase as a real-time storage will be an amazing thing to do. This is not a very good example for Firebase with AngularJS but this will get you started with Firebase and let you test a part of your application using this awesome real-time storage.</p>

<p>I would recommend you to look at <a href="https://github.com/firebase/firereader">this web application</a> build completely on Firebase and AngularJS.</p>

<h4 id="references">References</h4>

<ul>
<li><a href="https://www.firebase.com/">Firebase</a></li>
<li><a href="http://angularfire.com/">AngularFire</a> / <a href="https://github.com/firebase/angularFire">Github</a> / <a href="https://www.firebase.com/docs/angular/reference.html">Reference</a></li>
<li><a href="https://www.firebase.com/docs/">Firebase - Getting started docs</a></li>
</ul>

  </div>
  
  <div class="post-list__item">
    <span class="item__title--big">
      <a href="/post/turn-your-google-drive-folder-in-an-online-album-viewer/">Turn Your Google Drive Folder In An Online Album Viewer</a>
      
    </span>
    <span class="item__date">
      <i class="fas fa-calendar-alt"></i> May 4, 2014
    </span>
    
    <span>
      
      
      
      
      
      
      <a class="badge badge-category" href="/category/api">API</a>
      &nbsp;
      
      <a class="badge badge-category" href="/category/asp.net-mvc">ASP.NET MVC</a>
      &nbsp;
      
      <a class="badge badge-category" href="/category/c">C#</a>
      &nbsp;
      
      <a class="badge badge-category" href="/category/projects">PROJECTS</a>
      &nbsp;
      
      <a class="badge badge-category" href="/category/web">WEB</a>
      
      
      
      
    </span>
    <p>Working with <a href="https://developers.google.com/drive/">Google Drive API</a> is fun. The documentation is good and will let you get started with the API pretty quickly. I have my whole complete family album on <a href="http://onedrive.com/">OneDrive</a>, but the API is still a bit hard to use as compared to Google Drive API or maybe it is just for me. But while playing around with Drive API I ended up creating a small razor based web page application which will allow you to show your folder as an online web album. I have the <a href="https://github.com/prashantkhandelwal/DriveGallery">source code at Github</a>.</p>

<p>To get started register your application on the Google Developer Console. Here is a <a href="https://developers.google.com/console/help/">complete guide</a> on how to use the Google APIs.</p>

<p><img src="/images/google-register-app.png" alt="Registering the application on Google Dev Console" /></p>

<p>Copy the API keys and save it on the notepad. The basic usage example on the Google Drive API reference page uses a file called <code>client_secrets.json</code> which actually holds the API key. You can find this file in the <code>bin</code> folder.</p>

<pre class="brush: plain">
{
  "installed": {
    "client_id": "524339914714.apps.googleusercontent.com",
    "client_secret": "_Lq8D_Ai-T2IbhU8m2zXlQa"
  } 
}
</pre>

<p>You also have to enable the Drive API before you start using it.</p>

<p><img src="/images/dev-console-enable-api.png" alt="Enable API in Google Dev Console" /></p>

<p>I created a wrapper around the Google Drive API so I can use it in my other projects. Here is the complete code of my GoogleDrive class.</p>

<pre class="brush: csharp">
using System;
using System.Collections.Generic;
using System.Web;
using Google;
using Google.Apis.Auth.OAuth2;
using Google.Apis.Download;
using Google.Apis.Drive.v2;
using Google.Apis.Drive.v2.Data;
using Google.Apis.Logging;
using Google.Apis.Services;
using System.Threading.Tasks;
using System.Threading;
//using Google.Apis.Upload;
 
public class GoogleDrive
{
    DriveService service = null;
    public GoogleDrive()
    {
        Run().Wait();
    }
 
 
    private File GetFileByID(string fileID, DriveService service)
    {
        File file = service.Files.Get(fileID).Execute();
        if (file.ExplicitlyTrashed == null)
            return file;
        return null;
    }
 
    public string GetFolderID(string FolderName)
    {
        FilesResource.ListRequest request = service.Files.List();
        request.Q = "title = '" + FolderName + "'";
        FileList files = request.Execute();
        return files.Items[0].Id;
    }
    public List&lt;File&gt; ListFolderContent(string FolderID)
    {
        ChildrenResource.ListRequest request = service.Children.List(FolderID);
        List&lt;File&gt; files = new List&lt;File&gt;();
        //request.Q = "mimeType = 'image/jpeg'";
 
        request.Q = "'" + FolderID + "' in parents";
 
        do
        {
            try
            {
                ChildList children = request.Execute();
 
                foreach (ChildReference child in children.Items)
                {
                    files.Add(GetFileByID(child.Id, service));
                }
 
                request.PageToken = children.NextPageToken;
 
            }
            catch (Exception e)
            {
                request.PageToken = null;
            }
        } while (!String.IsNullOrEmpty(request.PageToken));
        return files;
    }
 
    public List&lt;File&gt; ListRootFileFolders()
    {
        List&lt;File&gt; result = new List&lt;File&gt;();
        FilesResource.ListRequest request = service.Files.List();
        do
        {
            try
            {
                FileList files = request.Execute();
 
                result.AddRange(files.Items);
                request.PageToken = files.NextPageToken;
            }
            catch (Exception e)
            {
                request.PageToken = null;
            }
        } while (!String.IsNullOrEmpty(request.PageToken));
        return result;
    }
 
    public byte[] DownloadFile(string fileID)
    {
        File file = service.Files.Get(fileID).Execute();
        var bytes = service.HttpClient.GetByteArrayAsync(file.DownloadUrl);
        return  bytes.Result;
    }
 
 
    private async Task Run()
    {
        try
        {
            GoogleWebAuthorizationBroker.Folder = "Files";
            UserCredential credential;
            using (var stream = new System.IO.FileStream("client_secrets.json",
                System.IO.FileMode.Open, System.IO.FileAccess.Read))
            {
                credential = await GoogleWebAuthorizationBroker.AuthorizeAsync(
                    GoogleClientSecrets.Load(stream).Secrets, DriveConstants.Scopes, "user", CancellationToken.None);
            }
 
            var drvService = new DriveService(new BaseClientService.Initializer()
            {
                HttpClientInitializer = credential,
                ApplicationName = "Drive API Sample",
 
            });
 
            if (drvService != null)
            {
                service = drvService;
            }
        }
        catch { }
    }
}
</pre>

<p>The <code>Storage</code> class uses <a href="https://github.com/robconery/biggy">Biggy</a> for the document storage. You have to manually add the names of the folder (considered as albums) on settings page. This will get added/appended in <code>settings.json</code> file in the <code>Data</code> folder which is in the web root of <a href="https://github.com/prashantkhandelwal/DriveGallery">DriveGallery</a>. Here is my settings file.</p>

<pre class="brush: plain">
{"AlbumName":"Atlassian"}
{"AlbumName":"DivX"}
{"AlbumName":"Envato"}
{"AlbumName":"Disqus"}
</pre>

<p>Settings page from where I can add the names of folders/albums. No view and delete options as of now, but I will soon add it.</p>

<p><img src="/images/webapp-settings-album.png" alt="Adding a new album" /></p>

<p>The added albums will be listed on the main/default page. The user will then have to click the name of the album to view the contents which should only images. At the moment there is no check which prevents it to show other files rather than only image files.</p>

<p><img src="/images/app-home.png" alt="App home page" /></p>

<p>Google Drive is slow when it comes to handle high amount of data. Google Drive storage is not like Azure or Amazon storage. It’s different and will not get you large results in appropriate time. If you want to use Drive Gallery make sure that you don’t use more than 25-50 images in a folder. Querying 25-50 files in a single go will be long but not more than if you have more than 50. Better option is to break your folder in parts like volume I &amp; II or Part 1 or 2.</p>

<p>I will try to make it look more attractive but for the moment it solves the purpose for me. Click on the <code>View</code> button to view the album. The <code>View</code> page accepts a query string name, which has the name of the folder/album. Google Drive API does not understand the <code>name</code> of the folder, so I have to get the folder id from the name. I will use the <code>GetFolderID</code> method of the <code>GoogleDrive</code> class which gives me the folder id. The received folder id is then passed to <code>ListFolderContent</code> method which will list all the files in the folder.</p>

<blockquote>
<p>Please note that, for the moment there is no check to retrieve only images from the folder. GoogleDrive.cs class is a generic version of the class I am using in my other projects. You just need to be sure that you have only images in the folder and not any other file.</p>
</blockquote>

<p><img src="/images/album-output.png" alt="Album output" /></p>

<p>Click the <code>View</code> button to view the full size image in the browser else click the <code>Download</code> button to download it directly. Basically Drive API does not have any property which holds the value of the URL to view the image online. So I tweaked the thumbnail URL in the ViewURL property so I can view the images online without having to download it.</p>

<pre class="brush: csharp">
public class Albums
{
    public string Id { get; set; }
    public string Title { get; set; }
    public string AlbumName { get; set; }
    public string DownloadURL { get; set; }
    public string ViewURL
    {
        get
        {
            return ThumbnailLink.Replace("=s220", "=s4000");
        }
    }
    public string ThumbnailLink { get; set; }
}
</pre>

<p>Taking the <code>ThumbnailLink</code> property and replace the <code>=s220</code> to <code>=s4000</code> does the trick.</p>

<blockquote>
<p>Note: The URLs are not permanent, it will change when the request expires.</p>
</blockquote>

<p>Properties of the Album class:</p>

<ul>
<li><code>Id:</code> File/Image id.</li>
<li><code>Tilte:</code> Title of the image/file.</li>
<li><code>AlbumName:</code> Name of the album/folder.</li>
<li><code>DownloadURL:</code> Download URL of the image/file. Original Drive API property name: <code>DownloadUrl</code>.</li>
<li><code>ViewURL:</code> URL which allows user to view the image in the browser.</li>
<li><code>ThumbnailLink:</code> URL of the thumbnail image. Original Drive API property name: <code>ThumbnailLink</code>.</li>
</ul>

<p>The duration of the operation depends on the amount of images you have in your folder. The lesser the number of images the fast the query will get executed. Here just for fun I have used Biggy JSON store to save the content details of the folder. If you want to remove it from your implementation, please do so. You may have to change some functions in order to get all other things working fine.</p>

<p>You can <a href="https://github.com/prashantkhandelwal/DriveGallery">download the complete source code from Github</a>. I am still working on it to make it more flexible and good looking. As I am not a designer and I seriously lack when it comes to web designs. Thanks to <a href="http://getbootstrap.com/">Twitter bootstrap</a> to make it look a bit good.</p>

  </div>
  
  <div class="post-list__item">
    <span class="item__title--big">
      <a href="/post/json-based-document-storage-using-biggy-in-aspnet-mvc/">JSON Based Document Storage Using Biggy In ASP.NET MVC</a>
      
    </span>
    <span class="item__date">
      <i class="fas fa-calendar-alt"></i> May 3, 2014
    </span>
    
    <span>
      
      
      
      
      
      
      <a class="badge badge-category" href="/category/api">API</a>
      &nbsp;
      
      <a class="badge badge-category" href="/category/asp.net-mvc">ASP.NET MVC</a>
      &nbsp;
      
      <a class="badge badge-category" href="/category/c">C#</a>
      &nbsp;
      
      <a class="badge badge-category" href="/category/web">WEB</a>
      
      
      
      
    </span>
    

<p>While working with a small web based project many developers will take advantage of web.config and XML files to read settings for the application. Using web.config is a good way but you cannot change the settings from within the application and when done manually it causes the website to restart. XML is good but many of us has a problem when it comes to update the details in XML. <a href="https://github.com/robconery/biggy">Biggy</a> is an awesome library developed by <a href="http://www.wekeroad.com/">Rob Conery</a> to work with document storage. It does a lot well more than you can think of if you are not following the project closely on Github. For now I am just going to show you how you can use Biggy to save your application data in JSON based document storage.</p>

<p>The library is not available on <a href="http://nuget.org/">NuGet</a>, so you have to download or fork the whole solution from Github and then build it. Create a new MVC application and add the reference of the Biggy assemblies you just build.</p>

<blockquote>
<p>Remove Newtonsoft.Json assembly that is added in your project by default when it is created by Visual Studio. The version of assembly seems to be incompatible with Biggy. Instead use the one which accompanies Biggy.</p>
</blockquote>

<p>Add a new model in your application and name it <code>settings</code>. The settings may depend on your application, as I am using it for my blog I have settings like blog name, blog description, posts per page and disable comments after &lsquo;x&rsquo; days.</p>

<pre class="brush: csharp">
public class Settings
{
    public string BlogName { get; set; }
    public string BlogDescription { get; set; }
    public string PostsPerPage { get; set; }
    public string CommentDays { get; set; }
}
</pre>

<p>I am manually building my view but you can use scaffolding if you wish to save your time. On submit of the form, the details will be sent to the server where my controller method will save the settings in the JSON file. Here is my view and controller code.</p>

<pre class="brush: html">
@model BiggyJSONDataStore.Models.Settings
@{
    ViewBag.Title = "Settings Page";
   }
 
&lt;div class="row"&gt;
    @using (Html.BeginForm("Settings", "Home", FormMethod.Post))
    {
        &lt;label&gt;Blog Name&lt;/label&gt;
        @Html.TextBoxFor(m =&gt; m.BlogName, new { @id = "blogname" })
        &lt;br /&gt;
        &lt;label&gt;Blog Description&lt;/label&gt;
        @Html.TextBoxFor(m =&gt; m.BlogDescription, new { @id = "blogdesc" })
        &lt;br /&gt;
        &lt;label&gt;Posts per Page&lt;/label&gt;
        @Html.TextBoxFor(m =&gt; m.PostsPerPage, new { @id = "postsperpage" })
        &lt;br /&gt;
        &lt;label&gt;Disable comments after&lt;/label&gt;
        @Html.TextBoxFor(m =&gt; m.CommentDays, new { @id = "commentdays" })
        &lt;label&gt;days&lt;/label&gt;&lt;br /&gt;
        &lt;input id="btnSave" type="submit" value="Save Settings" /&gt;
    }
&lt;/div&gt;
</pre>

<p><img src="/images/biggy-ui.png" alt="App to save info using Biggy" /></p>

<p>When the first time the page is loaded I want to check if there are settings in the file or not. If settings are there then render my view with settings. So the default <code>GET</code> view will look like this.</p>

<pre class="brush: csharp">
IBiggyStore&lt;Settings&gt; settingStore = new JsonStore&lt;Settings&gt;(dbPath: HttpRuntime.AppDomainAppPath);
try
{
    var data = settingStore.Load().Single();
    return View(data);
}
catch { }
 
return View();
</pre>

<p>The settingStore object is being created and creates a new file in the <code>Data</code> folder in the application root. the <code>dbPath</code> parameter specifies where the file (JSON file in this case) is saved, which is the web root. The <code>Load()</code> method of the <code>settingStore</code> will load all the data in the JSON file. In this case I have only single set of setting so I will use the <code>Single()</code> method to get the single setting record and not <code>IEnumerable&lt;Settings&gt;</code>.</p>

<pre class="brush: csharp">
IBiggyStore&lt;Settings&gt; settingStore = new JsonStore&lt;Settings&gt;(dbPath: HttpRuntime.AppDomainAppPath);
 
var store = new BiggyList&lt;Settings&gt;(settingStore);
 
var newSettings = new Settings();
 
newSettings.BlogName = setting.BlogName;
newSettings.BlogDescription = setting.BlogDescription;
newSettings.PostsPerPage = setting.PostsPerPage;
newSettings.CommentDays = setting.CommentDays;
 
store.Add(newSettings);
store.Update(setting);
 
return View();
</pre>

<p>The above code will add a new settings to the JSON file.</p>

<pre class="brush: plain">
{"BlogName":"Midnight Programmer","BlogDescription":"Programming For Fun","PostsPerPage":"10","CommentDays":"90"}
</pre>

<p>At this point if you keep pressing save button by entering different values a new entry will be added to the JSON file. To avoid this you have to update the details instead of adding it over and over again in the JSON file.</p>

<pre class="brush: csharp">
IBiggyStore&lt;Settings&gt; settingStore = new JsonStore&lt;Settings&gt;(dbPath: HttpRuntime.AppDomainAppPath);
 
var store = new BiggyList&lt;Settings&gt;(settingStore);
 
var newSettings = new Settings();
 
Settings data = null;
try
{
    data = settingStore.Load().Single();
}
catch { }
 
 
if (data != null)
{
    data.BlogName = setting.BlogName;
    data.BlogDescription = setting.BlogDescription;
    data.PostsPerPage = setting.PostsPerPage;
    data.CommentDays = setting.CommentDays;
    store.Update(data);
}
else
{
    newSettings.BlogName = setting.BlogName;
    newSettings.BlogDescription = setting.BlogDescription;
    newSettings.PostsPerPage = setting.PostsPerPage;
    newSettings.CommentDays = setting.CommentDays;
    store.Add(newSettings);
    store.Update(setting);
}
 
return View();
</pre>

<p>As you can see that the store object <code>Add</code> method is not called but only the <code>Update</code> method is called in case if the data object is not null.</p>

<p><img src="/images/biggy-ui-2.png" alt="App to save info using Biggy" /></p>

<p>If you plan to save multiple records in the file, then make sure you use identifier in order to get the required details.</p>

<h4 id="references">References</h4>

<ul>
<li><a href="https://github.com/robconery/biggy">Biggy - Github</a></li>
</ul>

  </div>
  
  <div class="post-list__item">
    <span class="item__title--big">
      <a href="/post/new-blogging-engine/">New Blogging Engine!</a>
      
    </span>
    <span class="item__date">
      <i class="fas fa-calendar-alt"></i> Apr 3, 2014
    </span>
    
    <span>
      
      
      
      
      
      
      <a class="badge badge-category" href="/category/musings">MUSINGS</a>
      
      
      
      
    </span>
    <p>I like <a href="http://wordpress.org/">Wordpress</a> but not as much as I like <a href="http://www.dotnetblogengine.net/">BlogEngine.NET</a>. I have to move to Wordpress because of a very serious issue in BlogEngine.NET. I am on a shared hosting and they are very peculiar about the memory/CPU usage of a site. So, The problem I faced was that if I use SQL Server CE as your data store than it will increase the disk usage time which in turn shuts down my site application pool and cause 503 service unavailable error. This was very annoying and to keep up my blog up and running I have to suddenly switch to Wordpress before I can figure out the exact cause of this problem.</p>

<p>I still have no issue with Wordpress, but I can&rsquo;t enhance it the way I can do it with BlogEngine.NET because it&rsquo;s in PHP. I decided to switch to BlogEngine once but then I thought it would be good to write a simple blog engine from scratch. So I fired up Visual Studio and start a new MVC web project. I worked on previous versions of MVC and I was aware of things which can be done more quickly than the traditional way. Writing a blog engine from scratch was a great way of learning a new technology. I am very much familiar with MVC so I opted to try some new stuff this time.</p>

<p>There is a lot of work pending but user facing part of my blog is completely ready by the end of this week or may be earlier than that. I want to thank <a href="http://odetocode.com/">K. Scott Allen</a> for his valuable tips for creating a custom blog engine.</p>

  </div>
  
  <div class="post-list__item">
    <span class="item__title--big">
      <a href="/post/desktop-notifications-in-html5/">Desktop Notifications In HTML5</a>
      
    </span>
    <span class="item__date">
      <i class="fas fa-calendar-alt"></i> Nov 17, 2013
    </span>
    
    <span>
      
      
      
      
      
      
      <a class="badge badge-category" href="/category/html5">HTML5</a>
      &nbsp;
      
      <a class="badge badge-category" href="/category/web">WEB</a>
      
      
      
      
    </span>
    

<p>If you are using Google chat on your browser you can see a notification pop-up when a new chat message arrives. I don’t use Google chat or GTalk a lot for communication so I am not very well versed about its over all functionality and coolness. But one thing that always got my attention in the past was the notification that I get on my desktop from Google. This is a very cool feature and my colleagues find it a very important feature of chat as it get their attention immediately.</p>

<p>HTML5 now gives us the ability to the developers to show Google like desktop notifications with a very little effort. Here is how you can accomplish this for one of your web applications. I am going to use <a href="http://notifications.spec.whatwg.org/">Notifications API</a> to show desktop notifications.</p>

<pre class="brush: html">
&lt;!DOCTYPE html&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
&lt;head&gt;
    &lt;title&gt;HTML5 Notifications&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;input type="text" id="txt" /&gt;
    &lt;input type="button"  value="Show as Notification"/&gt;
    &lt;input type="button" value="Show Random Notification"/&gt;
    &lt;input type="button" value="Show Random Notification (with icons)"/&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

<p>This is the plain HTML with controls in place. I have a text box and three buttons which will call a JavaScript function to show the notification on the desktop. The first button will show the text entered by the user as a notification. The second button will show a random message as a notification and a third button will show the same random message but this time with an icon. To see it in action lets add the JavaScript code.</p>

<pre class="brush: js">
&lt;script&gt;
function ShowTextAsNotification() {
    ShowNotification("Custom Notification", document.getElementById("txt").value);
}
  
function GetRandomText(ico) {
    var Quotes = ["Any fool can write code that a computer can understand. Good programmers write code that humans can understand.",
                  "Copy and paste is a design error.",
                  "I had a life once. Now I have a computer.",
                  "Before software can be reusable it first has to be usable.",
                  "Software sucks because users demand it to."];
  
    if (ico == false) {
        ShowNotification("Famous Quotes", Quotes[Math.floor(Math.random() * (1 - 5 + 1) + 5)]);
    }
    else {
        ShowNotificationsWithIcons("Famous Quotes", Quotes[Math.floor(Math.random() * (1 - 5 + 1) + 5)]);
    }
}
function ShowNotification(title, body) {
    Notification.requestPermission(function (perm) {
        if (perm == "granted") {
            var notification = new Notification(title, { body: body });
            //Un-comment the below line if you want to close the notification after a certain period
            //It not working on Chrome...I don't know why!!
            //notification.onshow = function () {
            //    setTimeout(notification.close, 5000)
            //}
        }
    });
}
function ShowNotificationsWithIcons(title, body) {
    Notification.requestPermission(function (perm) {
        if (perm == "granted") {
            var notification = new Notification(title, { icon: "Bomber.ico", body: body });
        }
    });
}
&lt;/script&gt;
</pre>

<p>The is pretty self-explanatory. The Notification API uses the <code>Notification.requestPermission</code> function to get the user consent before showing the notification on the desktop. The API documentation states that there are <a href="http://notifications.spec.whatwg.org/#permission">3 permissions</a>:</p>

<ul>
<li>default: This is equivalent to denied, but the user has made no explicit choice thus far.</li>
<li>denied: This means user does not want notifications.</li>
<li>granted: This means notifications can be displayed.</li>
</ul>

<p>On line 22 in the above code, you can see that the API checks for the request permission from the user. When it does that the user is prompted to either allow or deny the access of the API. You will be only asked once for this permission.</p>

<p><img src="/images/html5-desktop-notification.png" alt="HTML5 desktop notification security approval" /></p>

<p>The <em>perm</em> object is then checked for the permission, if “granted” then show the desktop notification to the user else there will be no notifications for the user. After the permission is granted from the user, initializes an instance of a Notification with <code>title</code> and <code>body</code>. You can say that title is the heading of the desktop notification and body is the text of the notification. You can also have an icon for the notification by setting the icon property.</p>

<p>Run the sample and enter a text in the text box and click on the button labeled “Show as Notification”. As soon as you click the button, if you are running it for the very first time then you will be prompted by the browser to allow or deny the access or it will show the notification at the bottom right corner of your desktop.</p>

<p><img src="/images/html5-custom-notification.png" alt="HTML5 desktop custom notification" /></p>

<p>In the above notification, <code>Custom Notification</code> is the <em>title</em> and “<code>This is a desktop notification</code>“ is the body.</p>

<p>Click the second button labeled “Show Random Notification”. Clicking this button will generate the same desktop notification but every time you click it it will generate a random message from an array and show it as a notification.</p>

<p><img src="/images/html5-custom-notification2.png" alt="HTML5 desktop custom notification" /></p>

<p>If you click the second button multiple times you will 3 notification at a time. The new notifications will be shown at the top of the current notification like this.</p>

<p><img src="/images/html5-multiple-desktop-notifications.png" alt="HTML5 multiple desktop notification" /></p>

<p>In case you click the button more than 3 times, you still be able to see these notifications until you close the one which are already visible. Once you close any of the notification the one in the queue will become visible.</p>

<p>The icon can be displayed in the left portion of these notifications. Click the third button to see it in action. It will display the same random quotes but this time with an icon.</p>

<p><img src="/images/html5-single-desktop-notification.png" alt="HTML5 desktop notification" /></p>

<p>The only problem I am facing implementing the Notifications API is that I cannot close these notifications automatically after the set time. You can try using it on your browser by un-commenting the lines in the <code>ShowNotification()</code> function.</p>

<h4 id="related-links">Related Links:</h4>

<ul>
<li><a href="http://notifications.spec.whatwg.org/">Notifications API – Documentation</a></li>
<li><a href="https://github.com/whatwg/notifications">Notifications API – Github</a></li>
</ul>

  </div>
  
</div>


<ul class="pagination">
    
    <li class="page-item">
        <a href="/" class="page-link" aria-label="First"><span aria-hidden="true">&laquo;&laquo;</span></a>
    </li>
    
    <li class="page-item">
    <a href="/page/5/" class="page-link" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a>
    </li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item"><a class="page-link" href="/">1</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item"><a class="page-link" href="/page/2/">2</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item"><a class="page-link" href="/page/3/">3</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item disabled"><span aria-hidden="true">&nbsp;&hellip;&nbsp;</span></li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item"><a class="page-link" href="/page/5/">5</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item active"><a class="page-link" href="/page/6/">6</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item"><a class="page-link" href="/page/7/">7</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item disabled"><span aria-hidden="true">&nbsp;&hellip;&nbsp;</span></li>
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    <li class="page-item"><a class="page-link" href="/page/32/">32</a></li>
    
    
    <li class="page-item">
    <a href="/page/7/" class="page-link" aria-label="Next"><span aria-hidden="true">&raquo;</span></a>
    </li>
    
    <li class="page-item">
        <a href="/page/32/" class="page-link" aria-label="Last"><span aria-hidden="true">&raquo;&raquo;</span></a>
    </li>
    
</ul>


        </div>
        



<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-8994557-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


<script defer src="https://use.fontawesome.com/releases/v5.2.0/js/all.js"
  integrity="sha384-4oV5EgaV02iISL2ban6c/RmotsABqE4yZxZLcYMAdG7FAPsyHYAPpywE9PJo+Khy"
  crossorigin="anonymous">
</script>

<link
  href="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/styles/shCore.min.css"
  rel="stylesheet"
/>
<link
  href="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/styles/shThemeDefault.min.css"
  rel="stylesheet"
/>

<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shCore.min.js"
></script>
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushCSharp.min.js"
></script>
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushCss.min.js"
></script>
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushJScript.min.js"
></script>
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushPlain.min.js"
></script>
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushSql.min.js"
></script>
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushXml.min.js"
></script>
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushPowerShell.min.js"
></script>
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushPython.min.js"
></script>
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushBash.min.js"
></script>
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushCpp.min.js"
></script>
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushRuby.min.js"
></script>

<script>
  SyntaxHighlighter.defaults["gutter"] = true;
  SyntaxHighlighter.defaults["smart-tabs"] = true;
  SyntaxHighlighter.defaults["auto-links"] = true;
  SyntaxHighlighter.defaults["collapse"] = false;
  SyntaxHighlighter.defaults["light"] = false;
  SyntaxHighlighter.defaults["tab-size"] = 4;
  SyntaxHighlighter.defaults["toolbar"] = false;
  SyntaxHighlighter.defaults["wrap-lines"] = true;
  SyntaxHighlighter.all();
</script>


    </body>
</html>
