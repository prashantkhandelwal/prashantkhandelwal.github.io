<!DOCTYPE html>
<html lang="en-us">
    
    


    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="public" />
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.49" />

    
    
    

<title>Marvel Comics Universe Graph Database â€¢ Midnight Programmer</title>


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Marvel Comics Universe Graph Database"/>
<meta name="twitter:description" content="In the past decade Marvel has gathered a lot of fans following which eventually led all the fans to know more about how the Marvel comics universe characters, stories, events are mapped or linked to each other.
In 2017 (if I am remembering it correctly), at Microsoft Build event, Microsoft announces Bot framework and did a demo with CosmosDB graph database which uses Gremlin query from Apache TinkerPop. It was a great demo, and I was really impressed by how they did it but unfortunately, I was unable to find the source code for that demo anywhere."/>

<meta property="og:title" content="Marvel Comics Universe Graph Database" />
<meta property="og:description" content="In the past decade Marvel has gathered a lot of fans following which eventually led all the fans to know more about how the Marvel comics universe characters, stories, events are mapped or linked to each other.
In 2017 (if I am remembering it correctly), at Microsoft Build event, Microsoft announces Bot framework and did a demo with CosmosDB graph database which uses Gremlin query from Apache TinkerPop. It was a great demo, and I was really impressed by how they did it but unfortunately, I was unable to find the source code for that demo anywhere." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://prashantkhandelwal.github.io/post/marvel-comics-universe-graph-db/" /><meta property="article:published_time" content="2023-01-03T10:34:00&#43;00:00"/>
<meta property="article:modified_time" content="2023-01-03T10:34:00&#43;00:00"/><meta property="og:site_name" content="Midnight Programmer" />


    


<link rel="stylesheet" href="/css/hyde-hyde.css">
<link rel="stylesheet" href="/css/print.css" media="print">


    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/favicon.png">
    

</head>


    <body class=" ">
    
<div class="sidebar">
  <div class="container ">
    <div class="sidebar-about">
      <span class="site__title">
        <a href="https://prashantkhandelwal.github.io/">Midnight Programmer</a>
      </span>
      
      
      
      <div class="author-image">
        <img src="https://prashantkhandelwal.github.io//img/prashantk.jpg" alt="Author Image" class="img--circle img--headshot element--center"> 
      </div>
      
      <p class="site__description">
         Programming For Fun 
      </p>
    </div>
    <div class="collapsible-menu">
      <input type="checkbox" id="menuToggle">
      <label for="menuToggle">Midnight Programmer</label>
      <div class="menu-content">
        <div>
	<ul class="sidebar-nav">
		 
		 
			 
				<li>
					<a href="/archive/"><i class='fa fa-road'></i>
						<span>Archive</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/top-posts/"><i class='fa fa-star fa-fw'></i>
						<span>Top Posts</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/contact/"><i class='fa fa-envelope fa-fw'></i>
						<span>Contact</span>
					</a>
				</li>
			 
		
		</li>
	</ul>
</div>

        <section class="social">
	
	
	<a href="https://facebook.com/khandelwal.p" rel="me"><i class="fab fa-facebook-f"></i></a>
	
	
	<a href="https://github.com/prashantkhandelwal" rel="me"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	<a href="http://feeds.feedburner.com/MidnightProgrammer" rel="me"><i class="fa fa-rss fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	<a href="https://instagram.com/prashantkhandelwal" rel="me"><i class="fab fa-instagram fa-lg" aria-hidden="true"></i></a>
	
	
	<a href="https://linkedin.com/in/khandelwalprashant" rel="me"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
</section>

      </div>
    </div>
    <p class="copyright">
      &copy; 2023 Pashant Khandelwal
      <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/2.5/in/"><img style="border-width: 0;" src="https://i.creativecommons.org/l/by-nc-sa/2.5/in/88x31.png" alt="Creative Commons License" class="thinglinkFiltered"></a>
      
    </p>
  </div>
  <div>
  </div>
</div>

        <div class="content container">
            
    <article>
  <header>
    <h1 class="item__title--big">Marvel Comics Universe Graph Database</h1>
    
    
<div class="post__meta">
    
    
    <span>
        <i class="fas fa-calendar-alt"></i> Jan 3, 2023
    </span>
    
    
    
    
    
    
    
    
    <a class="badge badge-category" href="/category/.net">.NET</a>
    &nbsp;
    
    <a class="badge badge-category" href="/category/c">C#</a>
    &nbsp;
    
    <a class="badge badge-category" href="/category/database">DATABASE</a>
    &nbsp;
    
    <a class="badge badge-category" href="/category/graph">GRAPH</a>
    &nbsp;
    
    <a class="badge badge-category" href="/category/gremlin">GREMLIN</a>
    
    
    
    
    
    
    <br />
    
</div>

  </header>
  
  
  <div class="post">
    <p>In the past decade Marvel has gathered a lot of fans following which eventually led all the fans to know more about how the Marvel comics universe characters, stories, events are mapped or linked to each other.</p>

<p>In 2017 (if I am remembering it correctly), at Microsoft Build event, Microsoft announces Bot framework and did a demo with CosmosDB graph database which uses Gremlin query from <a href="https://tinkerpop.apache.org/">Apache TinkerPop</a>. It was a great demo, and I was really impressed by how they did it but unfortunately, I was unable to find the source code for that demo anywhere. So, I thought I should at least get the graph database for my own use and then sometime later will work on building a NLU bot.</p>

<p>To get started I will be setting up the database using Apache TinkerPop and not CosmosDB due to cost and development speed. Will make use of <a href="https://github.com/apache/tinkerpop/tree/master/gremlin-dotnet">Gremlin.NET</a> - a wrapper around Gremlin Query Language. Let&rsquo;s <a href="https://tinkerpop.apache.org/download.html">download Apache TinkerPop Gremlin Server and Console</a>. These will be downloaded in .zip file, so extract them into a folder and navigate to the <code>bin</code> directory inside each extracted folder and using the command/shell prompt execute the <code>.bat</code> file if you&rsquo;re on Windows else <code>.sh</code> file if you are on Linux or WSL on Windows.</p>

<p><img src="/images/gremlin-server-start.png" alt="Gremlin Server Start" />
<img src="/images/gremlin-console-start.png" alt="Gremlin Console Start" /></p>

<p>After both the server and console are running, go to console terminal window and connect to the local TinkerPop server. Note that the console is independent of the server running on the local machine. If you are assuming that it will automatically connect to the running local instance of the server, then you are wrong. Therefore, we have to connect to the local server instance by executing the below command in the Gremlin console.</p>

<pre class="brush: shell">
gremlin> :remote connect tinkerpop.server conf/remote.yaml session
</pre>

<p>If you are unable to connect to the local server instance, then it might be a problem with your config file (.yaml) which you can find under <code>conf</code> folder in your <code>console</code> folder. Here are the contents of my <code>remote.yaml</code> file.</p>

<pre class="brush: text">
hosts: [localhost]
port: 8182
serializer: { className: org.apache.tinkerpop.gremlin.driver.ser.GraphBinaryMessageSerializerV1, config: { serializeResultToString: true }}
</pre>

<p>With connection established, now we can import the <code>graphson</code> data in the database. You can also refer to my <a href="https://github.com/prashantkhandelwal/mcugraph">Github repo</a> where I have used the raw data from the web to generate the edges and vertices for all Marvel characters. The <a href="https://syntagmatic.github.io/marvel/data/hero-network.csv">raw data</a> which is in csv format has some repetitive connections. The repo code ensures that there are no duplicate connections. You can also refer to the code if you plan to connect and play with TinkerPop graph database. Running the code and setting up the database will be a bit time-consuming, so I would suggest to download the <code>mcu.json</code> file from the repo and then importing it, which will happen in a few seconds.</p>

<p>The data file which you downloaded from the repo <code>mcu.json</code> should be stored on the Gremlin server current working directory. After you place the file, execute the below command on the Gremlin console.</p>

<pre class="brush: shell">
gremlin> :> g.io("mcu.json").read().iterate()
</pre>

<p>The above command will take a few seconds to execute and then it will return you back to the <code>gremlin</code> console. We can now verify the data by executing this command.</p>

<pre class="brush: shell">
gremlin> :> graph
</pre>

<p>If all goes well, you should see the output below of the above command.</p>

<p><img src="/images/gremlin-marvel-data-stats.png" alt="Gremlin marvel database stats" /></p>

<p>Let&rsquo;s write some Gremlin queries and find out some information. Go to Gremlin console and test these below queries.</p>

<p>How many people does Cap know?</p>

<pre class="brush: shell">
gremlin> :> g.V().has("name","CAPTAIN AMERICA").outE("knows").count()
</pre>

<p>And who are those people?</p>

<pre class="brush: shell">
gremlin> :> g.V().has("name","CAPTAIN AMERICA").out("knows").values("name")
</pre>

<p>Characters who have <code>IRON</code> in their name. Note that this is case-sensitive.</p>

<pre class="brush: shell">
gremlin> :> g.V().has('name', containing('IRON')).values('name')
</pre>

<p>As this is a graph database, it will be nice if we can visualize the data visually. There are few visualization tools I have used so far and <a href="https://gdotv.com/">GDotV</a> seems to a be popular one.</p>

<p><img src="/images/gremlin-gdotv-explorer.png" alt="GDotV Greamlin Visualization Tool" /></p>

<p>You can also visualize using this simple open-source graph visualization tool called <a href="https://github.com/prabushitha/gremlin-visualizer">gremlin-visualizer</a>. There are other visualization tools as well in case you want to work with some advanced feature sets. I personally make use of the basic console and mix of <code>gdotv</code> <code>gremlin-visualizer</code> as it fits my needs. For example, you will be able to execute this query below and see the visualization in <code>gremlin-visualizer</code> but unable to get this query to execute in <code>gdotv</code> version 1.0.1.</p>

<pre class="brush: shell">
g.V().has('hero', 'id', "CAPTAIN AMERICA").outE("knows").inV()
</pre>

<p><img src="/images/gremlin-visualizer-ui.png" alt="Gremlin-Visualizer - Visualization Tool" /></p>

<p><strong>Reference &amp; Resources</strong></p>

<ul>
<li><a href="https://github.com/prashantkhandelwal/mcugraph/">Github - mcugraph</a></li>
<li><a href="https://github.com/apache/tinkerpop/tree/master/gremlin-dotnet">Github - Gremlin.NET</a></li>
<li><a href="https://github.com/prabushitha/gremlin-visualizer">Github - gremlin-visualizer</a></li>
<li><a href="https://kelvinlawrence.net/book/Gremlin-Graph-Guide.html">Kelvin Lawrence Book - Practical Gremlin</a></li>
<li><a href="https://tinkerpop.apache.org/docs/current/tutorials/getting-started/">Apache TinkerPop - Getting Started</a></li>
</ul>

  </div>
  <div style="text-align:center; margin-top:10px">
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-5924643983709476",
        enable_page_level_ads: true
      });
    </script>
  </div>
  

<div class="navigation navigation-single">
    
    <a href="/post/installing-openfaas-on-k3s-single-node/" class="navigation-prev">
      <i aria-hidden="true" class="fa fa-chevron-left"></i>
      <span class="navigation-tittle">Installing OpenFaaS On k3s (Single Node)</span>
    </a>
    
    
    <a href="/post/capture-screenshot-and-description-of-a-web-page-using-go-and-chromedp/" class="navigation-next">
      <span class="navigation-tittle">Capture screenshot and description of a web page using Go and Chromedp</span>
      <i aria-hidden="true" class="fa fa-chevron-right"></i>
    </a>
    
</div>


  

  
    
        

<div id="disqus_thread"></div>
<script type="text/javascript">
    

    (function () {
    if (location.hostname === "localhost" ||
      location.hostname === "127.0.0.1" ||
      location.hostname === "") {
      return;
    }
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    var disqus_shortname = 'localblog-3';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || 
      document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<noscript>
  Please enable JavaScript to view the
  <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by
  <span class="logo-disqus">Disqus</span>
</a>

    


</article>
 




        </div>
        
    
  
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-8994557-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


<script defer src="https://use.fontawesome.com/releases/v5.2.0/js/all.js"
  integrity="sha384-4oV5EgaV02iISL2ban6c/RmotsABqE4yZxZLcYMAdG7FAPsyHYAPpywE9PJo+Khy"
  crossorigin="anonymous">
</script>

<link
  href="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/styles/shCore.min.css"
  rel="stylesheet"
/>
<link
  href="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/styles/shThemeDefault.min.css"
  rel="stylesheet"
/>

<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shCore.min.js"
></script>
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushCSharp.min.js"
></script>
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushCss.min.js"
></script>
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushJScript.min.js"
></script>
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushPlain.min.js"
></script>
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushSql.min.js"
></script>
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushXml.min.js"
></script>
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushPowerShell.min.js"
></script>
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushPython.min.js"
></script>
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushBash.min.js"
></script>
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushCpp.min.js"
></script>
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushRuby.min.js"
></script>

<script>
  SyntaxHighlighter.defaults["gutter"] = true;
  SyntaxHighlighter.defaults["smart-tabs"] = true;
  SyntaxHighlighter.defaults["auto-links"] = true;
  SyntaxHighlighter.defaults["collapse"] = false;
  SyntaxHighlighter.defaults["light"] = false;
  SyntaxHighlighter.defaults["tab-size"] = 4;
  SyntaxHighlighter.defaults["toolbar"] = false;
  SyntaxHighlighter.defaults["wrap-lines"] = true;
  SyntaxHighlighter.all();
</script>



    



    </body>
</html>
