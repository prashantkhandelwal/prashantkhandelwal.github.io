<!DOCTYPE html>
<html lang="en-us">
    
    


    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="public" />
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.49" />

    
    
    

<title>Building a Hidden Website with Python and Tor • Midnight Programmer</title>


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Building a Hidden Website with Python and Tor"/>
<meta name="twitter:description" content="In this post, I will walk through how you can create and host a simple website using Python and serve it as a Tor hidden service — nothing shady, just pure geeky fun.
Let’s begin by installing Tor. If you’re already familiar with the Tor browser, feel free to proceed. But if you’re new to it, you can learn more about the service here.
The Tor browser includes a Tor binary (tor."/>

<meta property="og:title" content="Building a Hidden Website with Python and Tor" />
<meta property="og:description" content="In this post, I will walk through how you can create and host a simple website using Python and serve it as a Tor hidden service — nothing shady, just pure geeky fun.
Let’s begin by installing Tor. If you’re already familiar with the Tor browser, feel free to proceed. But if you’re new to it, you can learn more about the service here.
The Tor browser includes a Tor binary (tor." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://prashantkhandelwal.github.io/post/building-a-hidden-website-with-python-and-tor/" /><meta property="article:published_time" content="2025-11-28T08:41:00&#43;00:00"/>
<meta property="article:modified_time" content="2025-11-28T08:41:00&#43;00:00"/><meta property="og:site_name" content="Midnight Programmer" />


    


<link rel="stylesheet" href="/css/hyde-hyde.css">
<link rel="stylesheet" href="/css/print.css" media="print">


    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/favicon.png">
    

</head>


    <body class=" ">
    
<div class="sidebar">
  <div class="container ">
    <div class="sidebar-about">
      <span class="site__title">
        <a href="https://prashantkhandelwal.github.io/">Midnight Programmer</a>
      </span>
      
      
      
      <div class="author-image">
        <img src="https://prashantkhandelwal.github.io//img/prashantk.jpg" alt="Author Image" class="img--circle img--headshot element--center"> 
      </div>
      
      <p class="site__description">
         Programming For Fun 
      </p>
    </div>
    <div class="collapsible-menu">
      <input type="checkbox" id="menuToggle">
      <label for="menuToggle">Midnight Programmer</label>
      <div class="menu-content">
        <div>
	<ul class="sidebar-nav">
		 
		 
			 
				<li>
					<a href="/archive/"><i class='fa fa-road'></i>
						<span>Archive</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/top-posts/"><i class='fa fa-star fa-fw'></i>
						<span>Top Posts</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/contact/"><i class='fa fa-envelope fa-fw'></i>
						<span>Contact</span>
					</a>
				</li>
			 
		
		</li>
	</ul>
</div>

        <section class="social">
	
	
	
	<a href="https://github.com/prashantkhandelwal" rel="me"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	<a href="http://feeds.feedburner.com/MidnightProgrammer" rel="me"><i class="fa fa-rss fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	<a href="https://instagram.com/prashantkhandelwal" rel="me"><i class="fab fa-instagram fa-lg" aria-hidden="true"></i></a>
	
	
	<a href="https://linkedin.com/in/khandelwalprashant" rel="me"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a>
	
	
	
	<a href="https://medium.com/@prashantkhandelwal" rel="me"><i class="fab fa-medium fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
</section>

      </div>
    </div>
    <p class="copyright">
      &copy; 2025 Pashant Khandelwal
      <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/2.5/in/"><img style="border-width: 0;" src="https://i.creativecommons.org/l/by-nc-sa/2.5/in/88x31.png" alt="Creative Commons License" class="thinglinkFiltered"></a>
      
    </p>
  </div>
  <div>
  </div>
</div>

        <div class="content container">
            
    <article>
  <header>
    <h1 class="item__title--big">Building a Hidden Website with Python and Tor</h1>
    
    
<div class="post__meta">
    
    
    <span>
        <i class="fas fa-calendar-alt"></i> Nov 28, 2025
    </span>
    
    
    
    
    
    
    
    
    <a class="badge badge-category" href="/category/python">PYTHON</a>
    &nbsp;
    
    <a class="badge badge-category" href="/category/tor">TOR</a>
    &nbsp;
    
    <a class="badge badge-category" href="/category/web">WEB</a>
    
    
    
    
    
    
    <br />
    
</div>

  </header>
  
  
  <div class="post">
    <div style="text-align: -webkit-center;">
<img src="/images/tor-python.png" alt="Tor Python" />
</div>

<p>In this post, I will walk through how you can create and host a simple website using Python and serve it as a Tor hidden service — nothing shady, just pure geeky fun.</p>

<p>Let’s begin by installing Tor. If you’re already familiar with the Tor browser, feel free to proceed. But if you’re new to it, you can learn more about the service <a href="https://www.torproject.org/">here</a>.</p>

<p>The Tor browser includes a Tor binary (<code>tor.exe</code>) that can be used to start a service or install it as a Windows service. To locate it, navigate to the folder where Tor is installed. On my system, it&rsquo;s located at: <code>D:\Programs\Tor Browser\Browser\TorBrowser\Tor</code>.</p>

<p>While the initial part of the path may vary depending on your installation location, the rest of the directory structure remains consistent.</p>

<p>Since we’re hosting a website using Python, there’s no need to launch the Tor Browser. Instead, we’ll start Tor as a service using the <code>tor.exe</code> binary. Normally, launching the Tor Browser automatically starts this service in the background, but when running it manually, we need a runtime configuration file (<code>torrc</code>). Below is a sample configuration file with minimal settings—just enough to get the site up and running. For security reasons we would like to have the Tor control port to be password protected . You can generate the password using the <code>tor.exe</code> with this command.</p>

<pre class="bush:shell">
tor.exe --hash-password Msft#win123
</pre>

<p>Copy the output of the above command and save it to the <code>torrc</code> file along with other configurations. Here is the final configuration file.</p>

<pre class="brush:shell">
ControlPort 9151
SOCKSPort 9050
HashedControlPassword 16:EA735EE7099CC752600CFC4A4BD2F0CE737BA55864A78711C7672E699C
</pre>

<p>The port settings mentioned above might differ on your system. If the service fails to start or your web application can’t connect to it, this is likely the cause.</p>

<p>Open command prompt in administrator mode if you are on Windows. Start the tor service by executing the below command.</p>

<pre class="brush:shell">
tor.exe -f <path to your torrc file>
</pre>

<p><img src="/images/tor-service-start.png" alt="TOR Service Start" /></p>

<p>If you do not want to get into a hassle of running this command for starting the service again and again, then you can install tor as a service. To do that use the <code>tor.exe</code> with <code>--service install</code> arguments and pass the <code>torrc</code> file path as a argument to <code>-f</code> flag.</p>

<pre class="brush:shell">
tor.exe --service install -options -f F:\code\torpy\torrc
</pre>

<p>On Windows, you can place the <code>torrc</code> file at <code>C:\Users\AppData\Roaming\tor</code>, which is the default location used by <code>tor.exe</code>. Once it&rsquo;s in place, you can run the command as shown below.</p>

<pre class="brush:shell">
tor.exe --service install
</pre>

<p>If you wish to delete the installed service, use the <code>sc</code> command available on Windows.</p>

<pre class="brush:shell">
sc delete tor
</pre>

<p>With the Tor service now running, create a new folder — feel free to name it <code>TorWeb</code> or anything you prefer. Inside this folder, set up a Python virtual environment and install the necessary dependencies to enable communication with the Tor service.</p>

<pre class="brush:shell">
pip install stem flask
</pre>

<p>Here is the entire Python code.</p>

<pre class="brush:python">
from stem.control import Controller
from flask import Flask, render_template

if __name__ == "__main__":

    app = Flask("TorWeb")
    port = 5000
    host = "127.0.0.1"
    hidden_svc_dir = "e:/web"

    @app.route('/')
    def index():
        return render_template('index.html')
    
    print('* Getting controller')
    controller = Controller.from_port(address="127.0.0.1", port=9151)
    try:
        controller.authenticate(password="Msft#win123")
        controller.set_options([
            ("HiddenServiceDir", hidden_svc_dir),
            ("HiddenServicePort", "80 %s:%s" % (host, str(port)))
        ])
        svc_name = open(hidden_svc_dir + "/hostname", "r").read().strip()
        print("* Created host: ", svc_name)
    except Exception as e:
        print(e)
    app.run()
</pre>

<ul>
<li><code>stem.control</code>: Lets you interact with the Tor process via control port.</li>
<li><code>flask</code> : Python web framework. You can use some other light-weight framework of your choice.</li>
<li><code>render_template</code>: Lets you render HTML templates.</li>
</ul>

<pre class="brush:python">
controller = Controller.from_port(address="127.0.0.1", port=9151)
</pre>

<p>Connects to the Tor control port (usually <code>9051</code> or <code>9151</code> depending on your setup).</p>

<pre class="brush:python">
controller.set_options([
    ("HiddenServiceDir", hidden_svc_dir),
    ("HiddenServicePort", "80 127.0.0.1:5000")
])
</pre>

<p><img src="/images/hidden-service-directory.png" alt="Hidden Service Directory" /></p>

<p><code>HiddenServiceDir</code> is a path to the directory where Tor will store hidden service data like <code>hostname</code>, <code>private_key</code> etc. This code tells Tor to create a hidden service and store its config in <code>E:\web</code> folder. <code>HiddenServicePort</code> forwards incoming traffic on port <code>80</code> to flask application at <code>127.0.0.1:5000</code>.</p>

<pre class="brush:python">
svc_name = open(hidden_svc_dir + "/hostname", "r").read().strip()
print("* Created host: ", svc_name)
</pre>

<p>This reads the generated <code>.onion</code> address from the <code>hostname</code> file and prints it.</p>

<p>Just to make my first dark web page cool, I asked ChatGPT to render a cool looking HTML page. Copy this HTML page inside a <code>template</code> folder so it can be used with Flask.</p>

<p>Run the app</p>

<p><img src="/images/tor-web-app.png" alt="TOR Web App Start" /></p>

<p>For enhanced security and greater control, it’s advisable to use a dedicated web server configured with recommended best practices.</p>

<p>You will not be able to open the Tor browser on your system as the Tor service is already running and the browser will not be able to connect to the instance which is already running. Although, Tor browser can connect to the existing Tor service but this is not typical and is not recommended to use.</p>

<p>I am using a different machine to view my application using a Tor browser.</p>

<blockquote>
<p>Note that the loading of the page might be slow as it solely depends on the Tor network connectivity. It can take up to several minutes for the page to load.</p>
</blockquote>

<p><img src="/images/tor-web-app-running.png" alt="TOR Web App Start" /></p>

<p>The souce code along with the <code>torrc</code> file used above can be found in <a href="https://github.com/prashantkhandelwal/labcode/tree/main/tor-flask-app">this repo path</a>.</p>

  </div>
  <div style="text-align:center; margin-top:10px">
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-5924643983709476",
        enable_page_level_ads: true
      });
    </script>
  </div>
  

<div class="navigation navigation-single">
    
    <a href="/post/conditional-compilation-in-rust-with-feature-flags/" class="navigation-prev">
      <i aria-hidden="true" class="fa fa-chevron-left"></i>
      <span class="navigation-tittle">Conditional Compilation in Rust with Feature Flags</span>
    </a>
    
    
</div>


  

  
    
        

<div id="disqus_thread"></div>
<script type="text/javascript">
    

    (function () {
    if (location.hostname === "localhost" ||
      location.hostname === "127.0.0.1" ||
      location.hostname === "") {
      return;
    }
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    var disqus_shortname = 'localblog-3';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || 
      document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<noscript>
  Please enable JavaScript to view the
  <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by
  <span class="logo-disqus">Disqus</span>
</a>

    


</article>
 




        </div>
        
    
  
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'G-QYXJT2TJCG', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


<script defer src="https://use.fontawesome.com/releases/v5.2.0/js/all.js"
  integrity="sha384-4oV5EgaV02iISL2ban6c/RmotsABqE4yZxZLcYMAdG7FAPsyHYAPpywE9PJo+Khy"
  crossorigin="anonymous">
</script>

<link
  href="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/styles/shCore.min.css"
  rel="stylesheet"
/>
<link
  href="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/styles/shThemeDefault.min.css"
  rel="stylesheet"
/>

<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shCore.min.js"
></script>
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushCSharp.min.js"
></script>
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushCss.min.js"
></script>
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushJScript.min.js"
></script>
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushPlain.min.js"
></script>
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushSql.min.js"
></script>
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushXml.min.js"
></script>
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushPowerShell.min.js"
></script>
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushPython.min.js"
></script>
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushBash.min.js"
></script>
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushCpp.min.js"
></script>
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushRuby.min.js"
></script>

<script>
  SyntaxHighlighter.defaults["gutter"] = true;
  SyntaxHighlighter.defaults["smart-tabs"] = true;
  SyntaxHighlighter.defaults["auto-links"] = true;
  SyntaxHighlighter.defaults["collapse"] = false;
  SyntaxHighlighter.defaults["light"] = false;
  SyntaxHighlighter.defaults["tab-size"] = 4;
  SyntaxHighlighter.defaults["toolbar"] = false;
  SyntaxHighlighter.defaults["wrap-lines"] = true;
  SyntaxHighlighter.all();
</script>



    



    </body>
</html>
